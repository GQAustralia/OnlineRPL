$thumbnail-group-item-bg: #fdfdfd;
$thumbnail-group-item-border-bottom-color: #cacaca;
$thumbnail-group-item-border-left-color: #e6e6e6;
$thumbnail-group-item-border-right-color: #e6e6e6;

$thumbnail-group-item-card-width: 200px;

// =============== Main ==============
.modal .thumbnail-group{
	.thumbnail-group-item{
		width: 25% !important;
	}

	@media screen and (max-width: $screen-xs-min){
		.thumbnail-group-item{
			width: 50% !important;
		}
	}
}
.thumbnail-group {
	display: block;
	position: relative;
	padding-left: 0;
	@include clearfix();

	.thumbnail-group-item {
		list-style: none;
		display: block;
		position: relative;
	}

	&.card-view {
		display: flex;
		flex-wrap: wrap;
		flex-direction: row;		
    	.thumbnail-group-item {
			width: 200px; // ie
			padding: 5px;
			float: left;

			@media(min-width: $screen-xs-min){
				padding: $grid-gutter-width / 8;
			}
			.thumbnail-holder{
				position: relative;
				border-radius: $border-radius-base;
				overflow: hidden;
				@include box-shadow(0 1px 2px 0px rgba(0,0,0,0));
				@include transition(box-shadow .3s $easing);


				&:hover {
					cursor: pointer;
					@include box-shadow(0 1px 15px 0px rgba(0,0,0,0.3));
					@include transition(box-shadow .3s $easing);
				} 
			} 

			.thumbnail-header {
				position: relative; 
				@include background-size(cover);
				width: 100%; // ie
				min-height: 140px;
			}

			.thumbnail-body {
				@include clearfix();
				padding: 15px;
				position: absolute;
				bottom: 0;
				width: 100%;
				height: 40px;
				
				@include transition(all .5s $easing); 
			}

			&:hover{
				.thumbnail-body{
					padding-top: 30px;
					background: rgba(0, 0, 0, 0.5);
					height: 100%;

					a { @include opacity(1); }
				}
				[data-column-name="filename"]{
					white-space: normal;
					text-overflow: none;
					overflow: visible;
					@include transition(all .3s $easing);
				}
			}
		}

		.date-uploaded{
			display: none; 
		}

		[data-has-icon="true"] {
			.thumbnail-body {
				@include gradient-vertical(transparent, transparent, -15%, 100%);
				background-color: rgba(0, 0, 0, 0.3);

				[data-column-name] {
					color: #ffffff;
				}
			}

			&:hover{
				.thumbnail-body{
					[data-column-name]{
						color: #fff;
					}
				}
			}

			.thumbnail-holder{
				background: $gray-lighter;
			}

			.thumbnail-icon{
				font-size: 30px;
				margin: auto;
				top: 0;
				right: 0;
				left: 0;
				position: absolute;
				@include opacity(0.5);
				bottom: 0;
				display: block;
				width: 50px;
				height: 50px;
				text-align: center;
			}
		}

		[data-has-icon="false"]{
			.thumbnail-body{
				background: rgba(0, 0, 0, 0.3);
			} 
		}

		[data-file-type="img"]{
			-webkit-background-size: cover;
				-moz-background-size: cover;
					-o-background-size: cover;
						-ms-background-size: cover;
			background-repeat: no-repeat;
			background-position: center;
		}

		[data-column-name="filename"] {
			display: block;
			font-size: 0.8em;
			overflow: hidden;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
			line-height: 1;
			position: relative;
			color: #fff;
			@include transition(all .3s $easing);
			overflow-wrap: break-word;
        	word-wrap: break-word;

		    &[href$='.zip']:after {  }
		    &[href$='.jpg']:after {  }
		    &[href$='.mp4']:after,
		    &[href$='.mpeg']:after {  }
		    &[href$='.doc']:after,
		    &[href$='.docx']:after {  }
		    &[href$='.pdf']:after {  }
		    &[href$='.ppt']:after,
		    &[href$='.pptx']:after {  }
		    &[href$='.avi']:after,
		    &[href$='.wmv']:after {  }
		    &[href$='.wav']:after {  }
		    &[href$='.xls']:after,
		    &[href$='.xlsx']:after {  }
		}

		[data-column-name="linkedto"],
		[data-column-name="filesize"],
		[data-column-name="uploaded"],
		[data-column-name="filetype"] { display: none; }
	}


	&.list-view {
		margin-top: 60px;
		
		&.stacked{
			.thumbnail-group-item {
				display: block;
			}
		}
		.thumbnail-group-item {
			width: 100% !important;
			display: table;
		}
		@media screen and (min-width: 568px){
			.thumbnail-group-item {
				display: inline-block;
			}
		}
		

		.thumbnail-icon{
			position: absolute;
			top: 0;
			right: 0;
			left: 0;
			bottom: 0;
			width: 20px;
			height: 32px;
			margin: auto;
			font-size: 30px;
		}

		.thumbnail-group-selection, .thumbnail-holder, .dropdown-thumbnail {
			display: block;
			vertical-align: middle;
		}

		&.stacked{
			.thumbnail-group-item:not(.thumbnail-group-item-loading){
				.thumbnail-body{
					display: inline-block;
					padding-left: $grid-gutter-width / 4;
					@include calc-sub-two-values(width, 100%, 80px);
				}
			}
			
		}

		.thumbnail-body {
			
			@media screen and (min-width: 568px){
				padding-left: 0;
				// display: table;
				[data-column-name] { display: block; position: relative;}

				@media screen and (min-width: 568px){
					[data-column-name] { display: inline-block; vertical-align: middle; position: relative;}
				}
			}
		}

		[data-trigger="preview-file"] { display: none; }

		[data-filename]{
			overflow: hidden;
			text-overflow: ellipsis;
			width: 100%;
			display: block;
			white-space: nowrap;

			
		}

		.date-uploaded{
			font-size: 11px;
		}
	}	
}

// =============== View ==============
.thumbnail-group.card-view {
	margin: 30px -7.5px 30px -7.5px;
	.thumbnail-group-selection {
	    clear: both;
	    position: absolute;
	    top: 15px;
	    display: none;
	}
	.thumbnail-group-item {
		@include transition(padding .3s $easing);
		border-radius: 2px;

		.dropdown-thumbnail {
			position: absolute;
			z-index: 100;
			top: 0;
			right: 0;

			&:not(.open) {
				display: none;
			}

			.dropdown-menu .zmdi {
				
			}
		}

		.btn-context-menu {

			background-color: $gray-dark;
			color: white;
			border: 1px solid white;
			@include box-shadow(0 0px 0 2px white);

			&:hover {
				background-color: darken($gray-dark,10%);
			}
		}

		&:hover .dropdown-thumbnail {
			display: block;
		}
	}
	&.edit-mode {

		.thumbnail-group-selection {
			display: block;

			&.locked{
				top: 7px;
				.zmdi-hc-2x.zmdi-lock{
					font-size: 20px;
				}
			}
		}
		.thumbnail-group-item {
			padding-top: 30px;
			@include transition(padding .3s $easing);
		}

		.dropdown-thumbnail {
			top: 25px;
			right: 0;
			display: block;		
		}
	}
}

.thumbnail-group.list-view {
	$thumb-dim: 50px;
	$check-dim: $thumb-dim;
	$action-dim: $thumb-dim;
	@media screen and (min-width: 568px){
		padding-top: 50px;
	}

	.dropdown-thumbnail{
		display: inline-block;
		vertical-align: middle;
	}

	&.stacked.edit-mode .thumbnail-group-selection{
        z-index: 9;
        position: absolute;
        left: -10px;
        top: -7px;


	}

	.thumbnail-group-selection {
		// width: $check-dim;
		width: 30px;
		padding-left: 10px;
		display: none !important;

		label { margin: 0; }
	}

	.thumbnail-header{
		display: none;
	}

	&.stacked{
		padding-top: 0;
		margin-top: 15px;
		.thumbnail-header{
			display: block;
		}
		.thumbnail-group-item:not(.thumbnail-group-item-loading){
			padding: 15px 5px;
			.thumbnail-body{
				[data-column-name]{ 
					padding: 0 15px 10px;  
					height: auto; 
					margin-right: -5px; 

					&:before{
						color: lighten($brand-gray, 25%);
						position: relative;
						padding: 0;
						background: none;
						border: none;
						bottom: 0;
						left: 0;
					}
				}
				[data-column-name="filename"],
				[data-column-name="linkedto"],
				[data-column-name="uploaded"],
				[data-column-name="filesize"]{
					width: 100% !important;
					text-align: left;
				}

				[data-column-name="filesize"]:before { content: 'File Size'; }
				[data-column-name="uploaded"]:before { content: 'Date Uploaded'; }
				[data-column-name="filename"]:before { content: 'Filename'; }
				[data-column-name="linkedto"]:before { content: 'Linked to'; }
			}
			.thumbnail-holder{
				@include calc-sub-two-values(width, 100%, 50px);
			}
		}
	}
	.thumbnail-group-item:not(.thumbnail-group-item-loading) {
		@include transition(padding .3s $easing);
		border-bottom: 1px solid $gray-lighter;

		@media screen and (min-width: 568px){
			padding: 5px;
		}

		.thumbnail-holder {
			@include calc-sub-two-values(width, 100%, 50px);
			display: inline-block;
			vertical-align: middle;
			margin-right: -5px;
		}

		&:hover {
			border-radius: $border-radius-base;
			background-color: $table-bg-hover;
		}

		.thumbnail-header {
			width: $thumb-dim;
			height: $thumb-dim;
			border-radius: $border-radius-base;
			background-size: cover;
			float: left;
			position: relative;
			background: lighten($brand-gray, 45%);

			&:hover {
				cursor: pointer;
			}
		}

		.thumbnail-holder[data-has-linked-to="false"]{
			.thumbnail-body{
				[data-column-name="filename"]{
					@include calc-sub-two-values(width, 100%, 100px);
				}
			}
		}

		.thumbnail-body {
			@include calc-sub-two-values(width, 100%, $thumb-dim);
			[data-column-name] {vertical-align: top;}
			@media screen and (min-width: 568px){
				[data-column-name] { padding: 8px 15px; margin: 0 -4px 0 0; height: $thumb-dim; }
			}
			$file-dim: 100px;
			$date-dim: 160px;

			[data-column-name="filename"] { 
				display: inline-block;
				width: 50%;
				margin-right: -4px;
				// @media screen and (min-width: $screen-phone){
				// 	width: 50%;
				// }
				
				// //@include calc-sub-two-values(width, 50%, $date-dim + $file-dim);
				// @media screen and (min-width: $screen-desktop){
				// 	@include calc-sub-two-values(width, 50%, $date-dim);
				// }
				
				font-weight: 400;
				
				color: $brand-gray;
				&:hover {
					text-decoration: underline;
					cursor: pointer;
				}
			}
			[data-column-name="linkedto"] { 
				display: inline-block;

				@media screen and (min-width: $screen-phone){
					width: 50%;
				}
				
				@media screen and (min-width: 568px){
					@include calc-sub-two-values(width, 50%, $file-dim);
				}

				&:before{
				}
			}
			[data-column-name="uploaded"] { 
				display: inline-block;

				@media screen and (min-width: 568px){
					width: 50%;
				}
				
				@media screen and (min-width: 568px){
					width: $date-dim; 
					text-align: center;
				}
			}
			[data-column-name="filesize"] { 
				display: inline-block;
				text-align: left;

				@media screen and (min-width: 568px){
					width: 50%;
				}
				
				@media screen and (min-width: 568px){
					width: $file-dim;
					text-align: center;
					text-transform: uppercase;
				}
			}
		}

		.dropdown-thumbnail {
			width: $action-dim;
			text-align: center;
		}

		.btn-context-menu {
			padding: 8px 12px;
			i { font-size: 2em; }
			&:hover {
				background-color: darken($table-bg-hover,15%);
			}
		}

		// Table headers
		[data-column-name] {
			&:before{
				display: block;
				font-size: 12px;
				
			}
			@media screen and (min-width: 568px){
				&:before {
					color: $brand-gray;
					position: absolute;
					width: 100%;
					left: 0;
					right: 0;
					padding: 15px;
					font-weight: 500;
					background-color: #f3f3f3;
					text-transform: uppercase;
					border-right: 3px solid white;
					@include calc-add-two-values(bottom,100%,15px);
				}
			}
		}
		&:first-child{
			[data-column-name="filesize"]:before { content: 'File Size'; }
			[data-column-name="uploaded"]:before { content: 'Date Uploaded'; }
			[data-column-name="filename"]:before { left: -($thumb-dim + 5); content: 'Filename'; @include calc-add-two-values(width, 100%, 55px)}
			[data-column-name="linkedto"]:before { right: -($action-dim  + 5); content: 'Linked to'; @include calc-add-two-values(width, 100%, 50px)}
		}

		@media screen and(max-width: 991px){
			
		}
	}
	.thumbnail-group-item:not(.thumbnail-group-item-loading){
		&:first-child{
			[data-column-name="filename"]:before{
				left: 0;
				width: 100%;
			}
		}

		.thumbnail-body{
			width: 100%;
		}
	}

	.thumbnail-holder[data-has-linked-to="false"]{
		.thumbnail-body{
			[data-column-name="filesize"]:before{
				@include calc-add-two-values(width, 100%, 50px);
			} 
		}
	}
	// List view edit-mode
	&.edit-mode {
		.thumbnail-group-selection {
			display: inline-block !important;
			padding-top: 25px;
			margin-right: -5px;
		}
		@media screen and (min-width: 568px){
			.thumbnail-group-selection {
				padding: 0;
			}
		}

		.thumbnail-holder[data-has-linked-to="false"]{
			.thumbnail-body{
				[data-column-name="filename"]{
					@include calc-sub-two-values(width, 100%, 200px);
				}

				[data-column-name="filesize"]:before{
					@include calc-add-two-values(width, 100%, 50px);
				} 
			}
		}

		.thumbnail-group-item:not(.thumbnail-group-item-loading){
				.thumbnail-holder{
				@include calc-sub-two-values(width, 100%, 80px);
			}
		}
			
		.thumbnail-group-item {
			&:first-child {
				[data-column-name="filename"]:before { 
					left: -30px; 
					content: 'Filename';
					@include calc-add-two-values(width, 100%, 30px)
				}
			}

			.thumbnail-body {
				// @include calc-sub-two-values(width, 100%, $thumb-dim*2);
			}
		}
	}
}


// =============== Loading ==============

// Card view
.thumbnail-group.card-view 
.thumbnail-group-item-loading {
	&:hover { cursor: progress; }
	.thumbnail-holder {
		border: 2px dashed $gray-lighter;
		@include box-shadow(none);

		&:hover {
			@include box-shadow(none !important);
			cursor: progress;
		}

		$color-fill: $gray;
		.thumbnail-progress-fill {
			position: absolute;
			top: 5px;
			bottom: 5px;
			left: 5px;
			right: 5px;
			overflow: hidden;

			&:hover { cursor: progress; }

			&:after, & > .percentage-fill:before {
				display: block;
				content: attr(data-progress-value);
				font-size: 3em;
				position: absolute;
				bottom: 5px;
				left: 5px;
				font-weight: 300;
			}

			&:after {
				z-index: 5;
				color: $color-fill;
			}
		}

		.percentage-fill {
			background-color: $color-fill;
			height: 0;
			bottom: 0;
			left: 0;
			right: 0;
			z-index: 10;
			position: absolute;
			display: block;
			overflow: hidden;
			font-style: normal;
			font-weight: 400;
			@include transition(height .3s $easing);

			&:before {
				z-index: 10;
				color: white;
			}
		}
	}
}

// List view
.thumbnail-group.list-view 
.thumbnail-group-item-loading {
	border: 2px dashed $gray-lighter;
	margin-top: 1px;

	&:hover { cursor: progress; }

	.thumbnail-holder {
		width: 60px;
		height: 50px;
		display: block;
		overflow: hidden;
		@include box-shadow(none);
		position: relative;

		&:hover {
			@include box-shadow(none !important);
			cursor: progress;
		}

		$color-fill: $gray;
		.thumbnail-progress-fill {
			position: absolute;
			top: 5px;
			bottom: 5px;
			left: 5px;
			right: 5px;
			overflow: hidden;

			&:hover { cursor: progress; }

			&:after, & > .percentage-fill:before {
				display: block;
				content: attr(data-progress-value);
				font-size: 1.6em;
				position: absolute;
				bottom: 5px;
				left: 5px;
				font-weight: 400;
			}

			&:after {
				z-index: 5;
				color: $color-fill;
			}
		}

		.percentage-fill {
			background-color: $color-fill;
			height: 0;
			bottom: 0;
			left: 0;
			right: 0;
			z-index: 10;
			position: absolute;
			display: block;
			overflow: hidden;
			font-style: normal;
			font-weight: 400;
			@include transition(height .3s $easing);

			&:before {
				z-index: 10;
				color: white;
			}
		}
	}

	&:before, &:after {
		display: block;
		content: '';
		position: absolute;
		height: 10px;
		background-color: $gray-lighter;
		border-radius: 30px;
	}

	&:before {
	    top: 12px;
	    left: 65px;
	    right: 30%;
	}

	&:after {
		top: 30px;
		left: 65px;
		right: 50%;
	}
}


// Misc
.is-mobile, .is-tablet {
	.thumbnail-group-item .edit-mode .btn-context-menu {
		display: block;
	}
}

.thumbnail-group-scroll {
	overflow-y: auto;
	max-height: 200px;
}