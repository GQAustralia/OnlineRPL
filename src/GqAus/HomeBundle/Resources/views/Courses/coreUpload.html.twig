{# Preloading #}
<div class="container" ng-if="qualificationPage == 'core' && !IsLoaded">
    <section class="panel">
        <div class="panel-body" data-loader="content">
            <section class="loader loading">
                <i class="msk1"></i>
                <i class="msk2"></i>
                <i class="msk3"></i>
            </section>
        </div>
    </section>
</div>
{# Preloading #}

<div class="container container-two-column-split " data-panel-parent="two-column-split" ng-show="qualificationPage == 'core' && IsLoaded">
    <section class="section-main col-section-10" ng-class="{'col-section-5': is_open === true, 'col-section-10': is_open === false}" data-panel="left">
        <div class="panel panel-default panel-units">
            <div class="panel-body" ng-hide="unitStatusArr['core']['all'].length === 0">
                <div class="clearfix">
                    <div class="progress-tag progress-tag-default">
                        <h3>Your Core Units</h3>
                        <progress style="width: 100%" role="progress" value="{[{percentCoreSubmitted()}]}" max="100"><img class="fallback" width="30"></progress>
                        <figcaption class="progress-details"> <span class="unit-percent">{[{percentCoreSubmitted()}]}</span> complete</figcaption>
                    </div>
                
                 <div class="dropdown dropdown-unit-filter">
                        <button type="button" class="btn btn-default text-left btn-sm" data-toggle="dropdown" ng-init="unitStatusArr['core'].selectedFilter = 'all'">
                            <i class="zmdi zmdi-filter-list zmdi-hc-lg zmdi-hc-fw"></i> <span class="filter-text">{[{unitStatusArr['core'].selectedFilter == 'all'?'Filter by Unit Status':'Filtered by ' + unitStatusArr['core'].selectedFilter}]}</span>
                            <i class="zmdi zmdi-chevron-down zmdi-hc-lg zmdi-hc-lg zmdi-hc-fw"></i>
                        </button>
                        <div class="dropdown-menu pull-right">
                            <div class="btn-group btn-group-vertical progress-summary" data-toggle="buttons">
                                <label class="progress-summary-item btn btn-default" data-status="notyetstarted" for="unitFilter" ng-click="setCoreFilter('Not Yet Started')">
                                    <input type="radio" name="unitFilter"><strong>{[{unitStatusArr['core']['Not Yet Started'].length}]}</strong><small>Not Yet Started</small>
                                </label> <!-- white -->
                                <label class="progress-summary-item btn btn-default" data-status="submitted" for="unitFilter" ng-click="setCoreFilter('Submitted')">
                                    <input type="radio" name="unitFilter"><strong>{[{unitStatusArr['core']['Submitted'].length}]}</strong><small>Submitted</small>
                                </label> <!-- orange -->
                                <label class="progress-summary-item btn btn-default" data-status="satisfactory" for="unitFilter" ng-click="setCoreFilter('Satisfactory')">
                                    <input type="radio" name="unitFilter"><strong>{[{unitStatusArr['core']['Satisfactory'].length}]}</strong><small>Satisfactory</small>
                                </label> <!-- black -->
                                <label class="progress-summary-item btn btn-default" data-status="notyetsatisfactory" for="unitFilter" ng-click="setCoreFilter('Not Yet Satisfactory')">
                                    <input type="radio" name="unitFilter"><strong>{[{unitStatusArr['core']['Not Yet Satisfactory'].length}]}</strong><small>Not Yet Satisfactory</small>
                                </label> <!-- red -->
                                <label class="progress-summary-item btn btn-default" data-status="competent" for="unitFilter" ng-click="setCoreFilter('Competent')">
                                    <input type="radio" name="unitFilter"><strong>{[{unitStatusArr['core']['Competent'].length}]}</strong><small>Competent</small>
                                </label> <!-- green -->
                                <label class="progress-summary-item btn btn-default" data-status="notyetcompetent" for="unitFilter" ng-click="setCoreFilter('Not Yet Competent')">
                                    <input type="radio" name="unitFilter"><strong>{[{unitStatusArr['core']['Not Yet Competent'].length}]}</strong><small>Not Yet Competent</small>
                                </label> <!-- red -->
                            </div>
                        </div>
                    </div>
                    </div>
                <div class="alert well-sm alert-info clearfix filter-status" ng-if="unitStatusArr['core'].selectedFilter != 'all'">
                    <strong class="pull-left">Showing all <span ng-bind="unitStatusArr['core'][unitStatusArr['core'].selectedFilter].length">6</span> <span>Competent</span> units </strong>
                    <button type="button" class="btn btn-info btn-xs pull-right" ng-click="setCoreFilter('all')">Remove Filter <i class="zmdi zmdi-close zmdi-hc-lg"></i></small></button>
                </div>
                <div class="list-group list-group-units panel-accordion">
                    <ul class="list-group-units-item units-selected"> 
                        <li class="list-group-units-subitem" ng-class="{'active': is_open === true && core.id === selectedUnit }"  ng-click="showUnitUpload(core)" ng-repeat="core in allCoreUnits | inArrayFilter:unitStatusArr['core'][unitStatusArr['core'].selectedFilter]:'id'">
                            <div class="btn-group">
                                <button type="button" class="btn">
                                   <span class="unit-name" ng-class="{'full-width': getStatusText(core.id) === ''}">{[{core.id}]} - {[{core.name}]}</span>
                                   <span class="unit-status"><label for="{[{core.name}]}" ng-if="getStatusText(core.id)" class="label" ng-class="getStatusClass(getStatusText(core.id))">{[{ getStatusText(core.id) || 'Evidence Needed'}]}</label></span>
                                </button>
                            </div>
                        </li>
              

                    </ul>

                </div>
                 
            </div>
            <div class="panel-body" ng-show="unitStatusArr['core']['all'].length === 0">
                <div class="clearfix">
                    <div class="progress-tag progress-tag-default">
                        <h3>Your Core Units</h3>
                        No Core Units Found
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% include 'GqAusHomeBundle:Courses:unitEvidenceUpload.html.twig' %} 
</div>