{% extends 'base.html.twig' %}
{% block title %}GQ - RPL Applicant Lists{% endblock %}
{% set userRole = app.security.getToken().getUser().getRoles() %}
{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('public/css/timepicker.css') }}" />
    {% if ('ROLE_MANAGER' not in userRole[0]) and ('ROLE_SUPERADMIN' not in userRole[0]) %}
    <link rel="stylesheet" href="{{ asset('public/css/pages/all/portfolio.css') }}">  
    {% else %}
     <link rel="stylesheet" href="{{ asset('public/css/pages/all/manager_portfolio.css') }}">      
     {% endif %}
{% endblock %}
{% block body %}

{% set userRole = app.security.getToken().getUser().getRoles() %}
<section class="portfolio-container currentnew" id="currentnew">
            <div class="container-fluid">
                <div class="row no-gutter">
                    <div class="col-xs-12 col-sm-12">
                        <div class="panel-group">
                            <div class="panel">
                                <div class="panel-heading clearfix">
                                    <h4 class="panel-title">                                       
                                        <span>Portfolios </span><span class="count" > {% if pendingApplicantsCount > 0 %}({{pendingApplicantsCount}}){% endif %} </span>
                                    </h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% if ('ROLE_MANAGER' not in userRole[0]) and ('ROLE_SUPERADMIN' not in userRole[0]) %}
                    <div class="col-xs-12 col-sm-12">
                        <div class="portfolio-filter">
                            <div class="row no-gutter">
                                <div class="col-xs-12 col-sm-12">
                                    <div class="gq-dashboard-tabs-header wid20p">
                                            <ul role="tablist" id="myTab" class="clearfix">
                                                    <li role="presentation" id="applicantPending" class="col-xs-6 col-sm-6 status active">
                                                            <a href="#current" aria-controls="current" role="tab" data-toggle="tab">CURRENT</a>
                                                    </li>
                                                    <li role="presentation" id="applicantCompleted" class="col-xs-6 col-sm-6 status">
                                                            <a href="#completed" aria-controls="completed" role="tab" data-toggle="tab" >COMPLETED</a>
                                                    </li>
                                            </ul>
                                    </div>
                               </div>
                            </div>   
                            <div class="row">
                                <div class="col-xs-12 col-sm-12">
                                    <div  class="filter">
                                     {#   <input type="text" value="" name="searchName" id="searchName" class="search-box" placeholder="Search" /> #}
                                        <input type="text" placeholder="Search" class="search_box search sort"  data-sort="firstName,lastName,phone,email,qualification,status,address,suburb,pincode,state"> 
                                    </div>
                                </div>                                    
                            </div>
                        </div>
                    </div>
                   
                    {% else %}
                       <div class="col-xs-12 col-sm-12">
							<div class="form-inline portfolio-filter">
								<div class="row">
									<div class="col-xs-12">
										<input type="text" name="searchName" id="searchName" placeholder="Search" class="form-control search_box search-box">                                    
									</div>
									<div class="col-xs-12">
										<label for="">Filter By</label>
									   <select name="filterByUser" id="filterByUser" class="form-control">
											<option value="">Assessor/Facilitator</option>
										{% for key, user in users %}
											<option value="{{user.id}}">{% if user.roletype == 2 %} Facilitator {% else %} Assessor {% endif %} : {{user.username}}</option>
										{% endfor %}
										</select>
									</div>
									<div class="col-xs-12">
											<label for="">Qualification Status</label>
											<select name="filterByStatus" id="filterByStatus" class="form-control">
												<option value="">Qualification Status</option>
												{% for key, status in qualificationStatus %}
													<option value="{{key}}">{{status["status"]}}</option>
												{% endfor %}
											</select>
									</div>
									<div class="col-xs-12">
										<button id="searchFilter" class="btn btn_red ">Filter</button>
									</div>
								</div>
							</div>
						</div>    
                             
                    {% endif %}
                   
                    <div id="err_msg"></div>
                    <div id="ajaxHtml" style="display:none;">
                            <img src="{{ asset('public/images')}}/loading.gif" class="img"/>
                    </div>
                    
                    <div class="col-xs-12 col-sm-12 tab-pane active" role="tabpanel" id="current">
                        <div class="portfolio-data-table mobile-portfolio-data-table">
                            <table class="table" id="myTable">
                                <thead>
                                    {% include 'GqAusUserBundle:Applicant/mobile:apllicantsFilters.html.twig' %}                                    
                                </thead>
                                <tbody class="list" id="currentList">
                                     {% include 'GqAusUserBundle:Applicant/mobile:applicants.html.twig' %}
                                    
                                </tbody>
                               {% if paginator.count > 1%}
                                <tfooter>
                                    <tr>
                                        <td colspan="6" class="gq-pagination-area">
                                            {# display navigation for pages - paginator_navigator #}        
                                          {{ include('GqAusUserBundle:Paginator:paginator_navigator.html.twig', {'paginator' : paginator}) }}
                                        </td>
                                    </tr>
                                </tfooter>
                          {% endif %}
                            </table>
                        </div>
                    </div>
                    {% if ('ROLE_MANAGER' not in userRole[0]) and ('ROLE_SUPERADMIN' not in userRole[0]) %}
                    <div role="tabpanel" class="col-xs-12 col-sm-12 tab-pane" id="completed" style="display:none;">
                         
                    <div class="portfolio-data-table mobile-portfolio-data-table">
                        <table class="table" >
                            <thead>
                                <tr>
                                    <th style="width:20%"><span class="">NAME</span></th>
                                    <th ><span class="">Qualification</span></th> 
                                </tr>
                            </thead>
                            <tbody class="list" id="completedList">                             
                                {% include 'GqAusUserBundle:Applicant/mobile:applicants.html.twig' %}
                            </tbody>
                        </table>
                    </div>
                </div>
                    {% endif %}
                </div> 
                
            </div>
        </section>

        
<!-- Larg Screens HTML End -->

<div class='candidate-details'><div id='removeCandidate'></div></div>         
<div class='unitInfo-details'><div id='removeUnitInfo'></div></div>         
{% endblock %}

{% block javascripts %}  
  <script type="text/javascript" src="{{ asset('public/js/list.min.js') }}"></script>
   <script type="text/javascript">
       var options = {
        valueNames: [ 'firstName','qualification', 'evidence','daysleft','status','email','address','suburb','pincode','state','phone']
        };
        var currentList = new List('currentnew', options);
        
         var Completedoptions = {
        valueNames: [ 'firstName','qualification']
        };
        var completedList = new List('completed', Completedoptions);
                       
   </script>
  
{% endblock %}