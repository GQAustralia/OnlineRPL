 {% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('public/css/pages/all/profile.css') }}">
    <link href="{{ asset('public/css/form.css') }}" rel="stylesheet">
<script src="{{ asset('public/js/custom-form-elements.js') }}"></script>
{% endblock %}  
<!-- Modal -->
<div class="modal fade profile_popup" id="profile2" role="dialog">
	<div class="modal-dialog">
		<!-- Modal content-->
		<div class="modal-content">
			<div class="modal-body">
				{% set userRole = app.security.getToken().getUser().getRoles() %}
                                {% set userId = app.security.getToken().getUser().getId() %}
				<div class="title_bar hidden-sm hidden-md hidden-lg">
					<span><i class="material-icons arrow_back">arrow_back</i></span>Your Profile<span><i class="material-icons clear_icon">clear</i></span>
				</div>
                             {% set userdata = app.security.getToken().getUser() %}
                                    {% if (roles[0]=='ROLE_FACILITATOR') %}
                                        {% set role = 'Facilitator' %}
                                    {% elseif(roles[0]=='ROLE_RTO') %}
                                        {% set role = 'RTO -'~userdata.getLastname()~" "~userdata.getFirstName() %}
                                    {% elseif(roles[0]=='ROLE_ASSESSOR') %}
                                        {% set role = 'Assessor' %}
                                    {% elseif(roles[0]=='ROLE_APPLICANT') %}
                                        {% set role = '' %}
                                    {% endif %}                            
                                <!-- Profile Form -->
                                <div class="header_block clearfix" id='user_profile_form_div'>
                                    	<div class="profile_section">
                                            <div id='ajax-gq-profile-page-img'><img src="{{ asset('public/uploads/'~userdata.getUserImage())}}" alt="profile_pic" id='user_profile_image' class="profile_image"/><input type="file" id="userprofile_userImage" name="userprofile" class="hidden browse_btn"></div>
                                                <div class="content">
							<h5 class="name"><strong>{% if ('ROLE_RTO' in roles) %}{{userdata.getContactName()}} {% else %} {{userdata.getFirstName()}}  {% endif %} </strong></h5>
							<span class="field">
                                                            {{role}}
                                                        </span>
                                                        {#<span class="title uploadTrigger"><input type="file" ></span>#}
						</div>
                                        </div>
                                        
					<div class="count">
						<span class="number portfolio-current"></span>
						<span class="title">Active Portfolios</span>
					</div>
                                       <span class="close" data-dismiss="modal"><i class="material-icons clear_icon">clear</i></span>
				</div>
                                <div class="row" id="profile_suc_msg2"></div>
                                <div class="gq-change-address-warning" id="change_address_error">
                                    {% for flashMessage in app.session.flashbag.get('errornotice') %}
                                    <div class="gq-id-address-error-text" style="dispaly:none">
                                        <h2><img src="{{ asset('public/images/login-error-icon.png') }}">{{ flashMessage }}</h2>
                                    </div>
                                   {% endfor %}
                                </div>
                                <div class="ajax-profile-error" id="ajax-profile-error"></div>
				<form class="form" id='user_profile_form'>
                                    <div class="form_fields">
				<div class="section name_group clearfix">
						<div class="form-group">
							<label>{% if ('ROLE_RTO' in roles) %} College Name {% else %} First Name {% endif %} </label>                                                        
							<input type="text" value="{{userdata.getFirstName()}}" id='userprofile_firstname' name='first_name' readonly>                                                        
                                                        <span><i class="material-icons">mode_edit</i></span>
                                                        <input type="hidden" value="{{userId}}" id='hdn-userId' name='hdn-userId'/>
                                                        <input type="hidden" value="0" id='hdn-type' name='hdn-type'/>
                                                        <input type='hidden' id='hdn-userrole' name='hdn-role' value="{% if ('ROLE_RTO' in userRole) %}rtouser{% elseif ('ROLE_FACILITATOR' in userRole) %}facilitatoruser{% elseif ('ROLE_ASSESSOR' in userRole) %}assessortoruser{% else %}applicant{% endif %}">
						</div>
						<div class="form-group">
							<label>{% if ('ROLE_RTO' in roles) %} Provider Code {% else %} Last Name {% endif %}</label>
							<input type="text" value="{{userdata.getLastName()}}" id='userprofile_lastname' name='last_name' readonly>
							<span><i class="material-icons">mode_edit</i></span>
						</div>
					</div>
					<div class="section">
						<div class="form-group">
							<label>Email</label>
							<input type="email" id="userprofile_email" value="{{userdata.getEmail()}}" readonly >							
						</div>
					</div>
                                        {% if (('ROLE_FACILITATOR' in roles) or ('ROLE_ASSESSOR' in roles) or ('ROLE_SUPERADMIN' in roles) or ('ROLE_MANAGER' in roles)) %}
                                        <div class="section number_group clearfix">
						<div class="form-group">
							<label>Phone</label>
							<input type="text" value="{{userdata.getPhone()}}" id='userprofile_phone' name='phone' readonly>
							<span><i class="material-icons">mode_edit</i></span>
						</div>
                                               <div class="form-group">
							<label>Password</label>
							<input type="text" value="........" readonly >
							<span><i class="material-icons lock" onclick="changePassowordDiv('1')">lock</i></span>
						</div>
                                                
						
					</div> 
                                        {% endif %}
                                        {% if ('ROLE_RTO' in roles) %}
					<div class="section number_group clearfix">
						<div class="form-group">
							<label>Contact Person Phone</label>

							<input type="text" value="{{userdata.getContactPhone()}}" id='userprofile_contactphone' name="contactphone" name='phone' readonly>

							<span><i class="material-icons">mode_edit</i></span>
						</div>
                                                <div class="form-group">
							<label>Contact Person Name</label>

							<input type="text" value="{{userdata.getContactName()}}" id="userprofile_contactname" name="contactname" readonly>

                                                        <span><i class="material-icons">mode_edit</i></span>
							
						</div>
						
					</div>  
                                        <div class="section">
						
                                            <div class="form-group">
							<label>Password</label>
							<input type="text" value="........" readonly >
							<span><i class="material-icons lock" onclick="changePassowordDiv('1')">lock</i></span>
						</div>
					</div>
                                        {% endif %}
                                         {% if ('ROLE_RTO' in roles) or ('ROLE_ASSESSOR' in roles)%}
                                        <!-- Address -->
                                        <div class="section">
						<div class="form-group">
							<label>Street Name</label>
							<input type="text" value="{{userdata.getAddress().getAddress()}}" id='userprofile_address_area' name='street_name' readonly>
							<span><i class="material-icons">mode_edit</i></span>
						</div>
						
					</div>
                                        <div class="section">
                                            <div class="form-group">
							<label>Street Number</label>
							<input type="text" value="{{userdata.getAddress().getArea()}}" id='userprofile_address_address' name="street_number" readonly>
							<span><i class="material-icons">mode_edit</i></span>
						</div>
                                        </div>
                                        
                                        <div class="section name_group clearfix">
						<div class="form-group">
							<label>Suburb</label>
							<input type="text" value="{{userdata.getAddress().getSuburb()}}" id='userprofile_address_suburb' name='suburb' readonly>
							<span><i class="material-icons">mode_edit</i></span>
						</div>
                                            <div class="form-group">
							<label>PostCode</label>
							<input type="text" value="{{userdata.getAddress().getPincode()}}" id='userprofile_address_pincode' name='postcode' readonly>
							<span><i class="material-icons">mode_edit</i></span>
						</div>
						
					</div>
                                        
                                        <div class="section name_group clearfix">
						<div class="form-group">
							<label>City</label>
							<input type="text" value="{{userdata.getAddress().getCity()}}" id="userprofile_address_city" name="city" readonly>
							<span><i class="material-icons">mode_edit</i></span>
						</div>
						<div class="form-group">
							<label>State</label>
							<input type="text" value="{{userdata.getAddress().getState()}}" id="userprofile_address_state" name="state" readonly>
							<span><i class="material-icons">mode_edit</i></span>
						</div>
					</div>
                                        
                                        <div class="section">
						<div class="form-group">
							<label>Country</label>
							<input type="text" value="{{userdata.getAddress().getCountry()}}" id="userprofile_address_country" name="country" readonly>
							<span><i class="material-icons">mode_edit</i></span>
						</div>
					</div>
                                        {% endif %}
                                 </div>   
			
				<button type="submit" class="submit_btn">SUBMIT</button>
                              </form>
                                {#MAtrix file Upload#}
                                {% if (roles[0]=='ROLE_ASSESSOR') %}
                               {% set matrixFiles = user_service.fetchOtherFiles(userId, 'matrix') %}
                               
                                <div class="gq-id-files-upload-success-text "  style="display: none;" id="resume_msg">
                                                <h2><img src="{{ asset('public/images')}}/tick.png"/> Files uploaded successfully</h2>
                                </div>
                                <div id="idfiletype_image"></div>
                                <div class="loading-icon" style="display: none;" id="matrix_load"><img src="{{ asset('public/images')}}/loading.gif" /></div>
                                <div id="matrixfileDiv">
				<div class="btn_section clearfix">
					<div class="add_trainer">
                                            <form name="matrix" id="matrixUpload" method="post" action="matrixupload" enctype="multipart/form-data">
                                          
                                                <input type="file" id="matrix_browse" name="matrix[browse]">
                                                <input type="hidden" id="matrix" name="matrix" value="matrix">
                                                <a href="javascript:void(0)" id="uploadTrigger">
                                                        <span><i class="material-icons">add</i></span>
                                                        <span class="hidden-xs">Add Trainer Matrix Files</span>
                                                        <span class="hidden-sm hidden-md hidden-lg">Add Files</span>
                                                </a>
                                                </form>
					</div>
                                        
					<a href="#"  id="download_matrix">
						<span><i class="material-icons" >file_download</i></span>Download Trainer Matrix.pdf

					</a>
				</div>
                        
				<div>
					<div class="file_info_block">
                                            {% if matrixFiles %}
                                            {% for item in matrixFiles %}
                                            {% set filesize = evidence_service.fileSize(item.size) %}
						<div class="file_info">
							<span class="icon">
								<i class="material-icons">description</i>
							</span>
							<span class="file-discription">
							{{ item.name}} <br>{{filesize}} | ADDED {{item.created|date("d/m/y") }}
							</span>
                                                        <span class="clear">
							<a href="javascript:void(0)" class="modalClass viewModalClass" data-toggle="modal" data-target="#deletefile" otherfiles="others" fileid="{{item.id}}" filetype="{{item.type}}">
								<i class="material-icons">clear</i>
							</a>
                                                        </span>
						</div> 
                                             {% endfor %}
                                                {% else %}
                                                <center id="matrix_no_files">No Trainer Matrix found</center>                        
                                                {% endif %}
					</div>
                                    
				</div>
                                    </div>
                                 {% endif%}
                                {#end#}
                                <div class="gq-change-pwd-warning" id="pwd_error">
                                        {% for flashMessage in app.session.flashbag.get('errornotice') %}
                                        <div class="gq-id-pwd-error-text" style="display:none">
                                            <h2><img src="{{ asset('public/images/login-error-icon.png') }}">{{ flashMessage }}</h2>
                                        </div>
                                       {% endfor %}
                                    </div>
                              <!-- Chaneg password form --->
                              <form class="form-inline change_pwd_form" id='change_password_form' style="display:none">
					<div class="form-group">
						<label for="email">Current Password</label>
                                                <div class="input_section">
                                                    <input type="password" id="password_oldpassword" name='password_oldpassword' value="" />
                                                    <span class="error_message" id="password_oldpassword_error_span"></span>
                                                </div>
					</div>
					<div class="form-group">
						<label for="pwd">New Password</label>
                                                <div class="input_section">
                                                    <input type="password" id='password_newpassword' name='password_newpassword' value="" />
                                                    <span class="error_message" id="password_newpassword_error_span"></span>
                                                </div>
					</div>
					<div class="form-group">
						<label for="pwd">Confirm Password</label>
                                                <div class="input_section">
                                                    <input type="password" id="password_confirmnewpassword" name='password_confirmnewpassword' value="" />
                                                    <span class="error_message" id="password_confirmnewpassword_error_span"></span>
                                                </div>
					</div>
					<div class="btn_section clearfix">
						<input type="submit" class="btn change_pwd_btn" value="Change Password" id='password_save' />
						<input type="button" class="btn" value="Cancel" onclick="changePassowordDiv('0')"/>
					</div>
				</form>
                              
			</div>
		</div>
	</div>
</div>
<div class="modal fade confirm_popup" id="deletefile" role="dialog">
    
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-body">
                    <div class="modal-title" id="myModalLabel">Do you want to delete selected file?<span class="close"><i class="material-icons" id="fclose"  data-dismiss="modal" aria-label="Close">clear</i></span></div>
                    <div class="btn_section">
                        <button class="btn btn_red deleteIdFiles">OK</button>
                        <button class="btn" id="fclose-cancel" data-dismiss="modal">CANCEL</button>
                         <span class="loading-icon" id="ajax-loading-delete-assessor-file" style="display:none;"><img src="{{ asset('public/images/loading.gif') }}" /></span>
                    </div>
                </div>
            </div>
        </div>
   
</div>
{% block javascripts %}
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
{% endblock %}
